(this["webpackJsonpreact-express-starter"]=this["webpackJsonpreact-express-starter"]||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){},240:function(e,t){},244:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(93),o=n.n(l),c=(n(104),n(105),n(40)),u=n.n(c),i=n(94),s=n(5),m=function(e){var t=e.username,n=e.handleUsernameChange,a=e.roomName,l=e.handleRoomNameChange,o=e.handleSubmit;return r.a.createElement("form",{onSubmit:o},r.a.createElement("h2",null,"Sit at a Desk "),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"name"},"Your Name"),r.a.createElement("input",{type:"text",id:"field",value:t,onChange:n,required:!0})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"room"},"Name of Desk"),r.a.createElement("input",{type:"text",id:"room",value:a,onChange:l}),"Share this with your partner"),r.a.createElement("button",{type:"submit"},"Join"))},d=n(16),f=n(95),b=n.n(f),h=function(e){var t=e.participant,n=Object(a.useState)([]),l=Object(s.a)(n,2),o=l[0],c=l[1],u=Object(a.useState)([]),i=Object(s.a)(u,2),m=i[0],f=i[1],b=Object(a.useRef)(),h=Object(a.useRef)(),p=function(e){return Array.from(e.values()).map((function(e){return e.track})).filter((function(e){return null!==e}))};return Object(a.useEffect)((function(){c(p(t.videoTracks)),f(p(t.audioTracks));return t.on("trackSubscribed",(function(e){"video"===e.kind?c((function(t){return[].concat(Object(d.a)(t),[e])})):"audio"===e.kind&&f((function(t){return[].concat(Object(d.a)(t),[e])}))})),t.on("trackUnsubscribed",(function(e){"video"===e.kind?c((function(t){return t.filter((function(t){return t!==e}))})):"audio"===e.kind&&f((function(t){return t.filter((function(t){return t!==e}))}))})),function(){c([]),f([]),t.removeAllListeners()}}),[t]),Object(a.useEffect)((function(){var e=o[0];if(e)return e.attach(b.current),function(){e.detach()}}),[o]),Object(a.useEffect)((function(){var e=m[0];if(e)return e.attach(h.current),function(){e.detach()}}),[m]),r.a.createElement("div",{className:"participant"},r.a.createElement("h3",null,t.identity),r.a.createElement("video",{ref:b,autoPlay:!0}),r.a.createElement("audio",{ref:h,autoPlay:!0,muted:!0}))},p=function(e){var t=e.roomName,n=e.token,l=(e.handleLogout,e.setTalk),o=e.talk,c=Object(a.useState)(null),u=Object(s.a)(c,2),i=u[0],m=u[1],f=Object(a.useState)([]),p=Object(s.a)(f,2),E=p[0],k=p[1];Object(a.useEffect)((function(){var e=function(e){k((function(t){return[].concat(Object(d.a)(t),[e])}))},a=function(e){k((function(t){return t.filter((function(t){return t!==e}))}))};return b.a.connect(n,{name:t}).then((function(t){m(t),t.on("participantConnected",e),t.on("participantDisconnected",a),t.participants.forEach(e)})),function(){m((function(e){return e&&"connected"===e.localParticipant.state?(e.localParticipant.tracks.forEach((function(e){e.track.stop()})),e.disconnect(),null):e}))}}),[t,n]);var v=E.map((function(e){return r.a.createElement(h,{key:e.sid,participant:e})}));return r.a.createElement("div",{className:"room"},r.a.createElement("h2",null,"Room: ",t),r.a.createElement("div",{className:"local-participant"},i?r.a.createElement(h,{key:i.localParticipant.sid,participant:i.localParticipant}):""),r.a.createElement("button",{onClick:function(){l(!o)},style:{margin:"0 auto",display:"block"}},"Hangup"),r.a.createElement("h3",null,"Remote Participants"),r.a.createElement("div",{className:"remote-participants"},v))},E=n(96),k=n(97),v=n(3),y=n.n(v),j=new(function(){function e(){Object(E.a)(this,e)}return Object(k.a)(e,[{key:"isSupported",value:function(){return null!==y.a}},{key:"start",value:function(){y.a&&y.a.start()}},{key:"abort",value:function(){y.a&&y.a.abort()}},{key:"resume",value:function(){y.a&&y.a.resume()}},{key:"addCommands",value:function(e){y.a&&y.a.addCommands(e)}},{key:"addCallback",value:function(e,t){y.a&&(y.a.addCallback("start",(function(t){return e("on")})),y.a.addCallback("soundstart",(function(t){return e("listening")})),y.a.addCallback("end",(function(t){return e("off")})),y.a.addCallback("error",(function(t){return e(t.error)})),y.a.addCallback("errorNetwork",(function(t){return e("network error")})),y.a.addCallback("errorPermissionBlocked",(function(t){return e("permission blocked")})),y.a.addCallback("errorPermissionDenied",(function(t){return e("permission denied")})),y.a.addCallback("result",(function(e){return t(e)})))}}]),e}()),O=n(98),g=n.n(O),w=function(e){var t=e.roomName,n=e.token,l=e.handleLogout,o=e.username,c=Object(a.useState)(!1),u=Object(s.a)(c,2),i=u[0],m=u[1],d=Object(a.useState)(!1),f=Object(s.a)(d,2),b=f[0],h=f[1],E=Object(a.useState)(""),k=Object(s.a)(E,2),v=(k[0],k[1]),y=Object(a.useState)(""),O=Object(s.a)(y,2),w=(O[0],O[1]),C=Object(a.useState)([]),S=Object(s.a)(C,2),N=S[0],P=S[1],R=Object(a.useState)([]),T=Object(s.a)(R,2),H=(T[0],T[1]),Y=Object(a.useState)(g()("/")),x=Object(s.a)(Y,2),D=x[0];x[1];Object(a.useEffect)((function(){N[0];var e={"Hey partner":function(){W()},Yes:function(){h(!1),m(!0)},Hangup:function(){J()}};j.addCommands(e),j.start(),D.emit("register",{data:{roomName:t,username:o}}),D.on("user-registered",(function(e){H(e.users);var t=e.users.filter((function(e){return e!=o}));P(t)})),D.on("calls",(function(e){e.data.caller!=o&&(h(!0),v(e.data.roomName),w(e.data.caller))}))}),[]);var W=function(){m(!0);var e=N[0]||"";D.emit("call",{data:{roomName:t,otherUser:e,caller:o}}),h(!1)},J=function(){m(!1),h(!1)};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"container",style:{backgroundColor:"#DCD5CD",paddingBottom:"5px"}},0==N.length?r.a.createElement("div",null,r.a.createElement("h3",null,"This desk is empty right now!"),r.a.createElement("br",null),r.a.createElement("p",null,"Ask your partner to join the desk ",r.a.createElement("em",null,t),".")):null,!i&&N.length>0?r.a.createElement("div",null,r.a.createElement("h3",null," You are on desk ",r.a.createElement("em",null,t)," with :",N.map((function(e,t){return" "+e+","}))),r.a.createElement("br",null),r.a.createElement("p",null," Say ",r.a.createElement("em",null,'"Hey!"')," aloud to talk to them or press the button below. \ud83d\udc47\ud83c\udffd"),!0!==b?r.a.createElement("button",{onClick:function(){return W()}},"Hey!"):null):null),!0!==b||i?null:r.a.createElement("div",{style:{backgroundColor:"red"}},r.a.createElement("h3",null,"Incoming Call!"),r.a.createElement("h4",null,'Say "Yes" to pickup!'),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){h(!1),m(!0)}},"Yes!"),r.a.createElement("a",{onClick:function(){return h(!1)}},"Close")),r.a.createElement("a",{onClick:l,style:{right:20,top:10,position:"absolute"}},"Log out"),i?r.a.createElement(p,{roomName:t,token:n,handleLogout:l,talk:i,setTalk:m}):null)},C=n(243),S=function(){var e=new C,t=Object(a.useState)(""),n=Object(s.a)(t,2),l=n[0],o=n[1],c=Object(a.useState)(e.word({syllables:2})),d=Object(s.a)(c,2),f=d[0],b=d[1],h=Object(a.useState)(null),p=Object(s.a)(h,2),E=p[0],k=p[1],v=Object(a.useCallback)((function(e){o(e.target.value)}),[]),y=Object(a.useCallback)((function(e){b(e.target.value)}),[]),j=Object(a.useCallback)(function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/token-room",{method:"POST",body:JSON.stringify({identity:l,room:f}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 3:n=e.sent,k(n.token);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f,l]),O=Object(a.useCallback)((function(e){k(null)}),[]);return E?r.a.createElement(w,{roomName:f,token:E,handleLogout:O,username:l}):r.a.createElement("div",null,r.a.createElement(m,{username:l,roomName:f,handleUsernameChange:v,handleRoomNameChange:y,handleSubmit:j}),r.a.createElement("div",{className:"container"},r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("h3",null,"Welcome to \ud83d\udc23 Hellin' Worki "),r.a.createElement("p",null,'Hellin Worki is a video conferencing platform which seamlessly dials your coworkers when you call out their name, a "Yes" and you are connected.'),r.a.createElement("br",null),r.a.createElement("h4",null,"Problem"),r.a.createElement("p",null,"Telling your coworkers to be constantly connected on 4 hour long video calls is obtrusive, awkward and plain weird. You could stay connected and disable your video ..."),r.a.createElement("a",{href:"https://dev.to/rohansawant/hellin-worki-now-joe-s-just-a-shout-away-twiliohackathon-2mh"},"Read the Blog"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Working"),r.a.createElement("ol",null,r.a.createElement("li",null,"You and your coworker Joe join a Room."),r.a.createElement("li",null,"Both enter their usernames"),r.a.createElement("li",null,'The microphone listens and waits for you to say "Hey Joe!"'),r.a.createElement("li",null,'When you do, Joe is notified and he can say, "Yes!" to pickup the call.')),r.a.createElement("br",null),"That's it!"))},N=function(){return r.a.createElement("div",{className:"app"},r.a.createElement("header",null,r.a.createElement("h1",null,"\ud83d\udc23 Hellin' Worki")),r.a.createElement("main",null,r.a.createElement(S,null)),r.a.createElement("footer",null,r.a.createElement("p",null,"Made with"," ",r.a.createElement("span",{role:"img","aria-label":"React"},"\u269b")," ","by ",r.a.createElement("a",{href:"https://twitter.com/_Rohan_Sawant_"},"Rohan Sawant"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},99:function(e,t,n){e.exports=n(244)}},[[99,1,2]]]);
//# sourceMappingURL=main.f413e634.chunk.js.map